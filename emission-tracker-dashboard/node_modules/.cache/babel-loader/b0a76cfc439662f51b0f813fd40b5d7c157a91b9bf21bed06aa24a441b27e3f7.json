{"ast":null,"code":"var _jsxFileName = \"/home/shambhavi/Documents/desis/project/muskan-repo/v2/Carbon-Footprint-Tracker/emission-tracker-dashboard/src/categories/UpdateCategory.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { setDoc, doc } from \"firebase/firestore\";\nimport { db } from '../firestore/firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Category({\n  isOpen,\n  onClose,\n  category,\n  userId\n}) {\n  _s();\n  const [data, setEnergy] = useState(0);\n  const [vehicle, setVehicleType] = useState(0);\n  if (!isOpen) return null;\n  const handleInputChange = event => {\n    setEnergy(event.target.value);\n  };\n  const handleVehicleChange = event => {\n    setVehicleType(event.target.value);\n  };\n  async function setData(url, options, userId, category, val) {\n    fetch(url, options).then(async res => {\n      var data;\n      console.log(data = await res.json());\n      switch (category) {\n        case 'travel':\n          val = data.carbonEquivalent;\n          break;\n        case 'vehicle':\n          val = data.carbonEquivalent;\n          break;\n        case 'food':\n          val = data[0].footprint;\n          break;\n        case 'electricity':\n          val = data.co2e;\n          break;\n        default:\n          break;\n      }\n      var date = new Date();\n      const date1 = date.getDate();\n      const time = date.getHours() + ':' + date.getMinutes() + \":\" + date.getSeconds();\n      console.log(typeof db);\n      setDoc(doc(db, userId, category), {\n        [date1]: {\n          [time]: val || null\n        }\n      }).then(res => {\n        console.log(res);\n      }).catch(e => console.log(e));\n      await onClose();\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n  async function updateValue() {\n    console.log(category);\n    switch (category) {\n      case 'travel':\n        const travelUrl = `https://carbonfootprint1.p.rapidapi.com/CarbonFootprintFromCarTravel?vehicle=SmallDieselCar&distance=${data}`;\n        const travelOptions = {\n          method: 'GET',\n          headers: {\n            'X-RapidAPI-Key': '7112f3b271msh36e3c9c905f726dp1e7e11jsnc2ea975060d8',\n            'X-RapidAPI-Host': 'carbonfootprint1.p.rapidapi.com'\n          }\n        };\n        setData(travelUrl, travelOptions, userId, category, 0);\n        break;\n      case 'vehicle':\n        const vehicleUrl = `https://carbonfootprint1.p.rapidapi.com/CarbonFootprintFromPublicTransit?type=${data}&distance=${vehicle}`;\n        const vehicleOptions = {\n          method: 'GET',\n          headers: {\n            'X-RapidAPI-Key': '7112f3b271msh36e3c9c905f726dp1e7e11jsnc2ea975060d8',\n            'X-RapidAPI-Host': 'carbonfootprint1.p.rapidapi.com'\n          }\n        };\n        setData(vehicleUrl, vehicleOptions, userId, category, 0);\n        break;\n      case 'food':\n        const foodUrl = `https://foodprint.p.rapidapi.com/api/foodprint/name/${data}`;\n        const foodOptions = {\n          method: 'GET',\n          headers: {\n            'X-RapidAPI-Key': '7112f3b271msh36e3c9c905f726dp1e7e11jsnc2ea975060d8',\n            'X-RapidAPI-Host': 'foodprint.p.rapidapi.com'\n          }\n        };\n        setData(foodUrl, foodOptions, userId, category, 0);\n        break;\n      case 'electricity':\n        const authToken = \"QDMV9AG3NJ47S6GV4HP0BY65X71R\";\n        const electricityUrl = \"https://api.climatiq.io/data/v1/estimate\";\n        const electricityOptions = {\n          method: \"POST\",\n          headers: {\n            'Authorization': `Bearer ${authToken}`\n          },\n          body: JSON.stringify({\n            \"emission_factor\": {\n              \"activity_id\": \"electricity-supply_grid-source_total_supplier_mix\",\n              \"data_version\": \"^9\"\n            },\n            \"parameters\": {\n              \"energy\": parseInt(data),\n              \"energy_unit\": \"kWh\"\n            }\n          })\n        };\n        setData(electricityUrl, electricityOptions, userId, category, 0);\n        break;\n      default:\n        break;\n    }\n    await onClose();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl mb-4\",\n        children: \"Update for today\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: handleInputChange,\n          className: \"text-base\",\n          placeholder: \"Enter the updated value\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 131\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          hidden: !(category == \"vehicle\"),\n          onChange: handleVehicleChange,\n          className: \"text-base\",\n          placeholder: \"Vehicle Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 154\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: updateValue,\n        className: \"bg-blue-500 text-white mt-4 py-2 px-4 rounded text-lg\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n}\n_s(Category, \"aMUsh3q+oqCgWuJ167MS5N1c9P8=\");\n_c = Category;\nvar _c;\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"names":["useState","setDoc","doc","db","jsxDEV","_jsxDEV","Category","isOpen","onClose","category","userId","_s","data","setEnergy","vehicle","setVehicleType","handleInputChange","event","target","value","handleVehicleChange","setData","url","options","val","fetch","then","res","console","log","json","carbonEquivalent","footprint","co2e","date","Date","date1","getDate","time","getHours","getMinutes","getSeconds","catch","e","updateValue","travelUrl","travelOptions","method","headers","vehicleUrl","vehicleOptions","foodUrl","foodOptions","authToken","electricityUrl","electricityOptions","body","JSON","stringify","parseInt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","placeholder","hidden","onClick","_c","$RefreshReg$"],"sources":["/home/shambhavi/Documents/desis/project/muskan-repo/v2/Carbon-Footprint-Tracker/emission-tracker-dashboard/src/categories/UpdateCategory.js"],"sourcesContent":["import { useState } from 'react';\nimport { setDoc, doc } from \"firebase/firestore\";\nimport { db } from '../firestore/firebase';\n\nexport default function Category({ isOpen, onClose, category, userId }) {\n    const [data, setEnergy] = useState(0);\n    const [vehicle, setVehicleType] = useState(0);\n    \n    if (!isOpen) return null;\n\n    const handleInputChange = (event) => {\n        setEnergy(event.target.value);\n    };\n    const handleVehicleChange = (event) => {\n        setVehicleType(event.target.value);\n    };\n\n    async function setData(url,options,userId,category,val) {\n        fetch(url,options).then(async (res) => {\n            var data;\n            console.log(data = await res.json());\n            switch (category){\n                case 'travel':\n                    val = data.carbonEquivalent;\n                    break;\n                case 'vehicle':\n                    val = data.carbonEquivalent;\n                    break;\n                case 'food':\n                    val = data[0].footprint\n                    break;\n                case 'electricity':\n                    val = data.co2e;\n                    break;\n                default:\n                    break;\n            }\n                   \n            var date = new Date();\n            const date1 = date.getDate()\n            const time = date.getHours() \n            + ':' + date.getMinutes() \n            + \":\" + date.getSeconds();\n            console.log(typeof(db))\n            setDoc(doc(db, userId,category), {\n            [date1] : {\n                  [time] : val || null\n                }\n              }).then((res) =>{console.log(res)}).catch((e) => console.log(e));\n            await onClose();\n        }).catch((e) => {console.log(e)})\n    }\n    \n\n    async function updateValue() {\n        console.log(category)\n        switch (category) {\n            case 'travel':\n                const travelUrl =  `https://carbonfootprint1.p.rapidapi.com/CarbonFootprintFromCarTravel?vehicle=SmallDieselCar&distance=${data}`;\n                const travelOptions = {\n                    method: 'GET',\n                    headers: {\n                        'X-RapidAPI-Key': '7112f3b271msh36e3c9c905f726dp1e7e11jsnc2ea975060d8',\n                        'X-RapidAPI-Host': 'carbonfootprint1.p.rapidapi.com'\n                    }\n                };\n                setData(travelUrl,travelOptions,userId,category,0);\n                break;\n\n            case 'vehicle':\n                const vehicleUrl =  `https://carbonfootprint1.p.rapidapi.com/CarbonFootprintFromPublicTransit?type=${data}&distance=${vehicle}`\n                const vehicleOptions  = {\n                        method: 'GET',\n                        headers: {\n                            'X-RapidAPI-Key': '7112f3b271msh36e3c9c905f726dp1e7e11jsnc2ea975060d8',\n                            'X-RapidAPI-Host': 'carbonfootprint1.p.rapidapi.com'\n                        }\n                    };\n            \n            \n                setData(vehicleUrl,vehicleOptions,userId,category,0)\n                break;\n\n            case 'food':\n                const foodUrl = `https://foodprint.p.rapidapi.com/api/foodprint/name/${data}`;\n                const foodOptions= {\n                            method: 'GET',\n                            headers: {\n                                 'X-RapidAPI-Key': '7112f3b271msh36e3c9c905f726dp1e7e11jsnc2ea975060d8',\n                    'X-RapidAPI-Host': 'foodprint.p.rapidapi.com'\n                            }\n                        };\nsetData(foodUrl,foodOptions,userId,category,0)\n                break;\n\n            case 'electricity':\n                const authToken = \"QDMV9AG3NJ47S6GV4HP0BY65X71R\";\n                const electricityUrl = \"https://api.climatiq.io/data/v1/estimate\";\n                const electricityOptions = { \n                    method: \"POST\", \n                    headers: { 'Authorization': `Bearer ${authToken}` },\n                    body: JSON.stringify({\n                        \"emission_factor\": { \"activity_id\": \"electricity-supply_grid-source_total_supplier_mix\", \"data_version\": \"^9\" },\n                        \"parameters\": { \"energy\": parseInt(data), \"energy_unit\": \"kWh\" }\n                    })\n                };\n                setData(electricityUrl,electricityOptions,userId,category,0)\n                break;\n\n            default:\n                break;\n        }\n        await onClose();\n    }\n\n    return (\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center\">\n            <div className=\"bg-white p-8 rounded-lg\">\n                <h2 className=\"text-2xl mb-4\">Update for today</h2>\n                <form>\n                    <input type=\"text\" onChange={handleInputChange} className=\"text-base\" placeholder=\"Enter the updated value\" /><br/>\n                    <input type=\"text\" hidden={!(category==\"vehicle\")} onChange={handleVehicleChange} className=\"text-base\" placeholder=\"Vehicle Type\" /><br/>\n                </form>\n                <button onClick={updateValue} className=\"bg-blue-500 text-white mt-4 py-2 px-4 rounded text-lg\">\n                    Close\n                </button>\n            </div>\n        </div>\n    );\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}